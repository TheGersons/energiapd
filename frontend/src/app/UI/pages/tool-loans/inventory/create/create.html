<div class="space-y-5">
  <div class="w-full flex justify-between items-center">
    <div>
      <div class="flex items-center gap-2">
        <button
          (click)="goBack()"
          class="p-0 rounded-full h-6 w-6 hover:bg-gray-200 rounded-full cursor-pointer">
          <app-loader [name]="'arrow-left'" hostClass="w-6 h-6"></app-loader>
        </button>
        <h2 class="text-2xl font-bold">
          Creación o Modificación de Herramientas
        </h2>
      </div>
      <h3 class="text-gray-500">Gestión de Herramientas</h3>
    </div>
  </div>
  <div class="space-y-4">
    <form
      novalidate
      autocomplete="off"
      (submit)="isEditMode() ? onUpdate($event) : onCreate($event)"
      class="p-4 rounded-md shadow-md border border-blue-200 bg-white grid grid-cols-1 gap-4">
      <div class="flex flex-col space-y-2">
        <label class="font-semibold" for="name">Nombre:</label>
        <input
          [formField]="toolForm.toolName"
          type="text"
          id="name"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
          placeholder="Nombre de la herramienta" />
        @if (isFieldInvalid("toolName")) {
          <p class="text-sm text-red-400 font-medium flex items-center gap-1">
            @for (a of toolForm.toolName().errors(); track $index) {
              <app-loader
                name="warning"
                hostClass="w-3 h-3 text-red-400"></app-loader>
              <span>{{ a.message }}</span>
            }
          </p>
        }
      </div>
      <div class="flex flex-col space-y-2">
        <label class="font-semibold" for="code">Código Contable:</label>
        <input
          [formField]="toolForm.toolCode"
          type="text"
          id="code"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
          placeholder="Ej: EPDCN001" />
        @if (isFieldInvalid("toolCode")) {
          <p class="text-sm text-red-400 font-medium flex items-center gap-1">
            @for (a of toolForm.toolCode().errors(); track $index) {
              <app-loader
                name="warning"
                hostClass="w-3 h-3 text-red-400"></app-loader>
              <span>{{ a.message }}</span>
            }
          </p>
        }
      </div>
      <div class="flex flex-col space-y-2">
        <label class="font-semibold" for="brand">Marca:</label>
        <input
          [formField]="toolForm.toolBrand"
          type="text"
          id="brand"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
          placeholder="Ej: Marca de la herramienta" />
        @if (isFieldInvalid("toolBrand")) {
          <p class="text-sm text-red-400 font-medium flex items-center gap-1">
            @for (a of toolForm.toolBrand().errors(); track $index) {
              <app-loader
                name="warning"
                hostClass="w-3 h-3 text-red-400"></app-loader>
              <span>{{ a.message }}</span>
            }
          </p>
        }
      </div>
      <div class="flex flex-col space-y-2">
        <label class="font-semibold" for="model">Modelo:</label>
        <input
          [formField]="toolForm.toolModel"
          type="text"
          id="model"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
          placeholder="Modelo de la herramienta" />
        @if (isFieldInvalid("toolModel")) {
          <p class="text-sm text-red-400 font-medium flex items-center gap-1">
            @for (a of toolForm.toolModel().errors(); track $index) {
              <app-loader
                name="warning"
                hostClass="w-3 h-3 text-red-400"></app-loader>
              <ul>
                {{
                  a.message
                }}
              </ul>
            }
          </p>
        }
      </div>
      <div class="flex flex-col space-y-2">
        <label class="font-semibold" for="serie">Serie:</label>
        <input
          [formField]="toolForm.toolSerial"
          type="text"
          id="serie"
          class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
          placeholder="Serie de la herramienta" />
      </div>
      <div class="flex flex-col space-y-2">
        <label
          class="ps-1 text-gray-700 text-sm font-medium"
          htmlFor="description">
          Descripción
        </label>
        <textarea
          class="rounded-md border border-blue-200 p-2 hover:bg-gray-100 focus:bg-gray-200 focus:outline-0 resize-none"
          [formField]="toolForm.toolDescription"
          id="description"
          rows="5"
          placeholder="Descripción de la herramienta..."></textarea>
      </div>
      <div class="flex flex-col gap-2">
        <label class="ps-1 text-gray-700 text-sm font-medium" for="img"
          >Imagen de la Herramienta</label
        >
        <div
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
          (click)="fileInput.click()"
          [class.border-blue-500]="isDragging"
          class="relative flex gap-2 items-center justify-center bg-neutral-100 border border-blue-200 rounded-md p-2 hover:bg-gray-100">
          <app-loader [name]="'img'"></app-loader>
          <div class="flex flex-col justify-center items-center">
            <span class="text-gray-600"
              >Haz clic para cargar la imagen o arrastra</span
            >
            <span class="text-gray-400">o arrastra y suelta aquí</span>
            <input
              #fileInput
              (change)="onFileSelect($event)"
              name="img"
              id="img"
              class="absolute inset-0 z-100 cursor-pointer opacity-0"
              type="file" />
          </div>
        </div>
      </div>
      <div
        class="flex items-center justify-end border-t border-gray-300 p-4 space-x-5">
        <button
          type="button"
          class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-400">
          Cancelar
        </button>
        <button
          type="submit"
          class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500">
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
