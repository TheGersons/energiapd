<div class="space-y-5">
  <div class="w-full flex justify-between items-center">
    <div>
      <h2 class="text-2xl font-bold">Gestión de Usuarios</h2>
      <h3 class="text-gray-500">Creación y edición de Usuarios del sistema</h3>
    </div>
    <button
      (click)="onToggleModal()"
      class="flex space-x-3 cursor-pointer p-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white">
      <svg
        class="w-6 h-6 text-white"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 24 24">
        <path
          fill-rule="evenodd"
          d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4.243a1 1 0 1 0-2 0V11H7.757a1 1 0 1 0 0 2H11v3.243a1 1 0 1 0 2 0V13h3.243a1 1 0 1 0 0-2H13V7.757Z"
          clip-rule="evenodd" />
      </svg>
      <span>Crear Usuario</span>
    </button>
  </div>

  <div class="flex space-x-10 w-[50%]">
    <div
      class="rounded-lg border border-gray-200 items-center space-x-5 bg-white shadow-sm p-4 flex w-full">
      <div class="bg-blue-200 rounded-lg p-3">
        <svg
          class="w-6 h-6 text-gray-800"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="currentColor"
          viewBox="0 0 24 24">
          <path
            fill-rule="evenodd"
            d="M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H6Zm7.25-2.095c.478-.86.75-1.85.75-2.905a5.973 5.973 0 0 0-.75-2.906 4 4 0 1 1 0 5.811ZM15.466 20c.34-.588.535-1.271.535-2v-1a5.978 5.978 0 0 0-1.528-4H18a4 4 0 0 1 4 4v1a2 2 0 0 1-2 2h-4.535Z"
            clip-rule="evenodd" />
        </svg>
      </div>

      <div class="">
        <h2 class="text-2xl font-bold">5</h2>
        <h3 class="text-slate-500">Usuarios</h3>
      </div>
    </div>
    <div
      class="rounded-lg border border-gray-200 items-center space-x-5 bg-white shadow-sm p-4 flex w-full">
      <div class="bg-green-200 rounded-lg p-3">
        <svg
          class="w-6 h-6 text-gray-800"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24">
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 11.917 9.724 16.5 19 7.5" />
        </svg>
      </div>
      <div class="">
        <h2 class="text-2xl font-bold">5</h2>
        <h3 class="text-slate-500">Usuarios Activos</h3>
      </div>
    </div>
    <div
      class="rounded-lg border border-gray-200 items-center space-x-5 bg-white shadow-sm p-4 flex w-full">
      <div class="bg-red-200 rounded-lg p-3">
        <svg
          class="w-6 h-6 text-gray-800"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24">
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6" />
        </svg>
      </div>
      <div class="">
        <h2 class="text-2xl font-bold">5</h2>
        <h3 class="text-slate-500">Usuarios Inactivos</h3>
      </div>
    </div>
  </div>

  <div
    class="overflow-x-auto rounded-xl shadow-sm border border-gray-200 bg-white">
    <table class="min-w-full border-collapse text-left text-sm text-gray-700">
      <!-- Encabezado -->
      <thead
        class="bg-neutral-100 text-gray-800 sticky top-0 z-10 [&_th]:px-6 [&_th]:py-3 [&_th]:font-semibold">
        <tr>
          <th>Nombre</th>
          <th>Correo</th>
          <th>Usuario</th>
          <th>Rol</th>
          <th>Estado</th>
        </tr>
      </thead>

      <!-- Cuerpo -->
      <tbody
        class="divide-y divide-gray-200 [&_td]:px-6 [&_td]:py-3 cursor-pointer">
        @for (u of users.value(); track $index) {
          <tr class="bg-white hover:bg-gray-100 transition-colors">
            <td>{{ u.userFullName }}</td>
            <td>{{ u.userMail }}</td>
            <td>{{ u.username }}</td>

            <td>
            </td>
            <td>
              <span
                [ngClass]="
                  u.userStatus
                    ? 'bg-green-300 text-green-700'
                    : 'bg-red-500 text-white'
                "
                class="px-2 py-1 rounded-full text-xs"
                >{{ u.userStatus ? "Activo" : "Inactivo" }}</span
              >
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<div
  (click)="onToggleModal()"
  [ngClass]="toggleModal() ? 'block' : 'hidden'"
  class="modal fixed inset-0 z-50 w-full overflow-hidden bg-gray-800/75 flex justify-center items-center transition-all">
  <div
    (click)="$event.stopPropagation()"
    class="rounded-lg shadow-lg w-[50%] min-h-[30%] relative overflow-y-auto overflow-hidden">
    <!-- Modal Content -->
    <div
      class="relative bg-white rounded-lg h-full w-full flex flex-col space-y-4">
      <div
        class="flex items-center justify-between border-b p-4 border-gray-300 rounded-t">
        <h3 class="text-3xl font-semibold">Creación de Rol / Edición de Rol</h3>
        <button
          type="button"
          class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
          (click)="onToggleModal()">
          <svg
            class="w-3 h-3"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 14">
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>
      <!-- Modal Body -->
      <div class="p-4 space-y-4">
        <div class="flex flex-col space-y-2">
          <label class="font-semibold" for="userFullName">Nombre:</label>
          <input
            [(ngModel)]="userFullName"
            type="text"
            id="userFullName"
            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
            placeholder="Nombre del Usuario" />
        </div>
        <div class="flex flex-col space-y-2">
          <label class="font-semibold" for="username">Usuario:</label>
          <input
            [(ngModel)]="username"
            type="text"
            id="username"
            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
            placeholder="Ej: apodo123" />
        </div>
        <div class="flex flex-col space-y-2">
          <label class="font-semibold" for="userMail"
            >Correo Electrónico:</label
          >
          <input
            [(ngModel)]="userMail"
            type="email"
            id="userMail"
            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
            placeholder="Ej: usuario@example.com" />
        </div>
        <div class="flex flex-col space-y-2">
          <label class="font-semibold" for="userPass">Contraseña:</label>
          <input
            [(ngModel)]="userPass"
            type="password"
            id="userPass"
            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 placeholder:text-gray-500"
            placeholder="Contraseña" />
        </div>
        <div class="flex flex-col space-y-2">
          <label class="font-semibold" for="userRoleId">Rol:</label>
          <ng-select [(ngModel)]="userRoleId" placeholder="Seleccione el Rol">
            @for (r of roles.value(); track $index) {
              <ng-option [value]="r.roleId">{{ r.roleName }}</ng-option>
            }
          </ng-select>
        </div>
        <div
          class="flex items-center justify-end border-t border-gray-300 p-4 space-x-5">
          <button
            class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-400">
            Cancelar
          </button>
          <button
            (click)="onSave()"
            class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500">
            Guardar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
